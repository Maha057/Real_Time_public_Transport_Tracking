<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Seats</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="booking-page">
  <header>
    <h2>Book Seats - <span id="bus-id">PB-01-2024</span></h2>
    <p id="route">Kovilpatti → Tirunelveli on 9/22/2025</p>
  </header>

  <div class="container">
    <div class="legend">
      <div><span class="available"></span>Available</div>
      <div><span class="selected"></span>Selected</div>
      <div><span class="booked"></span>Booked</div>
    </div>

    <div class="seat-layout" id="seatLayout">
      <!-- Seats will be generated dynamically -->
    </div>

    <div class="summary">
      <h3>Booking Summary</h3>
      <p><b>Selected Seats:</b> <span id="selectedSeats">None</span></p>
      <p><b>Subtotal:</b> ₹<span id="subtotal">0</span></p>
      <p><b>Convenience Fee:</b> 0</p>
      <p><b>GST (5%):</b> ₹<span id="gst">0</span></p>
      <h3>Total Amount: ₹<span id="total">0</span></h3>
    </div>

    <!-- ✅ UDID Verification Section -->
    <div class="udid-verification">
      <h3>UDID Verification</h3>
      <label for="udid">Enter UDID No:</label>
      <input type="text" id="udid" placeholder="Enter your UDID number" maxlength="18" required>
      <span id="udidStatus"></span>
    </div>

    <button class="continue-btn" id="continueBtn" disabled>
      Continue to Payment
    </button>
  </div>

  <script>
    // ✅ UDID Verification logic with regex
    const udidInput = document.getElementById("udid");
    const udidStatus = document.getElementById("udidStatus");
    const continueBtn = document.getElementById("continueBtn");

    udidInput.addEventListener("input", () => {
      const udid = udidInput.value.trim();
      const udidPattern = /^[A-Z0-9]{18}$/; // 18 chars, only A-Z & 0-9

      if (udidPattern.test(udid)) {
        udidStatus.textContent = "✔ UDID Verified";
        udidStatus.style.color = "green";
        continueBtn.disabled = false; // enable payment button
      } else {
        udidStatus.textContent = "❌ Invalid UDID (must be 18 characters, A-Z & 0-9)";
        udidStatus.style.color = "red";
        continueBtn.disabled = true; // disable until valid
      }
    });
  </script>

  <script src="script.js"></script>
</body>
</html>
